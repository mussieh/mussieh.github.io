window.addEventListener("load",loadPage);function loadPage(){document.getElementById("decButton").addEventListener("click",decrypt)}
function decrypt(){var a=fillMatrix(),g=strip(document.getElementById("textC").value),l=getDigrams(g),m=[],b="",c,d,e,f,h,k;if(""==g)alert("Please input a text to be decrypted.");else for(g=0;g<l.length;g++){c=l[g][0];d=l[g][1];c=a.indexOf(c);d=a.indexOf(d);h=Math.min(c,d);k=Math.max(c,d);var n=h%5,p=k%5;e=Math.abs(c-d);f=e%5;if(0==f)4>=c?(b+=a[c+20],b+=a[d-5]):4>=d?(b+=a[c-5],b+=a[d+20]):(b+=a[c-5],b+=a[d-5]);else if(4>=e&&p>n)4==e?0==(k+1)%5&&(0==(c+1)%5?(b+=a[c-1],b+=a[d+4]):0==(d+1)%5&&(b+=a[c+
4],b+=a[d-1])):0==(c+1)%5?(b+=a[c-1],b+=a[d-1]):0==(d+1)%5?(b+=a[c-1],b+=a[d-1]):0==c%5?(b+=a[c+4],b+=a[d-1]):0==d%5?(b+=a[c-1],b+=a[d+4]):(b+=a[c-1],b+=a[d-1]);else{e=h;f=0;if(0==(h+1)%5||n>p)for(;0!=Math.abs(e-k)%5;)e--,f--;else for(;0!=Math.abs(e-k)%5;)e++,f++;c==h?(b+=a[c+f],b+=a[d-f]):(b+=a[c-f],b+=a[d+f])}m.push(b);b=""}document.getElementById("decT").innerHTML=m.toString().replace(/,/ig," ")};
